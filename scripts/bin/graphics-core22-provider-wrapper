#!/bin/bash
set -euo pipefail

ARCH_TRIPLET="$(arch)-linux-gnu"
SELF="$( cd -- "$(dirname "$0")/.." ; pwd -P )"

LD_LIBRARY_PATH=${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}${SELF}/lib/:${SELF}/lib/${ARCH_TRIPLET}
LIBGL_DRIVERS_PATH=${LIBGL_DRIVERS_PATH:+$LIBGL_DRIVERS_PATH:}${SELF}/lib/${ARCH_TRIPLET}/dri/
LIBVA_DRIVERS_PATH=${LIBVA_DRIVERS_PATH:+$LIBVA_DRIVERS_PATH:}${SELF}/lib/${ARCH_TRIPLET}/dri/
__EGL_VENDOR_LIBRARY_DIRS=${__EGL_VENDOR_LIBRARY_DIRS:+$__EGL_VENDOR_LIBRARY_DIRS:}${SELF}/share/glvnd/egl_vendor.d

export LD_LIBRARY_PATH
export LIBGL_DRIVERS_PATH
export LIBVA_DRIVERS_PATH
export __EGL_VENDOR_LIBRARY_DIRS

exec "$@"
